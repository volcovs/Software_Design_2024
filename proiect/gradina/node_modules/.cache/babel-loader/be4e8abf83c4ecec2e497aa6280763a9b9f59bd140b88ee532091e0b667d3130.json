{"ast":null,"code":"import React, { Component } from 'react';\nimport axios from 'axios';\nimport '../style/UserPage.css'; // Import CSS file\nimport UserPresenter from \"../presenter/UserPresenter\";\nclass UserPage extends Component {\n  constructor(props) {\n    super(props);\n    this.handleRowClick = userId => {\n      this.setState({\n        selectedRow: userId\n      });\n    };\n    this.handleDelete = id => {\n      axios.delete(`http://localhost:8080/users/deleteById?id=${id}`).then(response => {\n        console.log(response.data);\n        this.setState(prevState => ({\n          users: prevState.users.filter(user => user.userID !== id)\n        }));\n      }).catch(error => {\n        console.error('Error deleting data:', error);\n      });\n      axios.delete(`http://localhost:8080/employee/deleteByUser?id=${id}`).then(response => {\n        console.log(response.data);\n        this.setState(prevState => ({\n          employees: prevState.employees.filter(emp => emp.id !== id)\n        }));\n      }).catch(error => {\n        console.error('Error deleting data:', error);\n      });\n    };\n    this.handleEdit = userId => {\n      const {\n        role,\n        onChangePage,\n        lang\n      } = this.props;\n      onChangePage(role, 5, 0, userId, lang);\n    };\n    this.showAll = () => {\n      this.presenter.fetchData();\n    };\n    this.showAdmins = () => {\n      axios.get('http://localhost:8080/users/filter?status=yes').then(response => {\n        this.setState({\n          users: response.data\n        });\n        axios.get('http://localhost:8080/employee/filter?status=yes').then(resp => {\n          this.setState({\n            employees: resp.data\n          });\n        }).catch(error => {\n          console.error('Error fetching employee data:', error);\n        });\n      }).catch(error => {\n        console.error('Error fetching user data:', error);\n      });\n    };\n    this.showEmp = () => {\n      axios.get('http://localhost:8080/users/filter?status=no').then(response => {\n        this.setState({\n          users: response.data\n        });\n        axios.get('http://localhost:8080/employee/filter?status=no').then(resp => {\n          this.setState({\n            employees: resp.data\n          });\n        }).catch(error => {\n          console.error('Error fetching employee data:', error);\n        });\n      }).catch(error => {\n        console.error('Error fetching user data:', error);\n      });\n    };\n    this.state = {\n      users: [],\n      employees: [],\n      selectedRow: null,\n      lastLang: null,\n      dict: []\n    };\n    this.presenter = new UserPresenter(this);\n  }\n  componentDidMount() {\n    this.presenter.fetchData();\n  }\n  componentWillUnmount() {\n    // Cancel any pending axios requests when the component unmounts\n    this.cancelRequests();\n  }\n  cancelRequests() {\n    // Implement cancellation logic for axios requests if needed\n  }\n  render() {\n    this.presenter.render();\n  }\n}\nexport default UserPage;","map":{"version":3,"names":["React","Component","axios","UserPresenter","UserPage","constructor","props","handleRowClick","userId","setState","selectedRow","handleDelete","id","delete","then","response","console","log","data","prevState","users","filter","user","userID","catch","error","employees","emp","handleEdit","role","onChangePage","lang","showAll","presenter","fetchData","showAdmins","get","resp","showEmp","state","lastLang","dict","componentDidMount","componentWillUnmount","cancelRequests","render"],"sources":["D:/Personal_Data/an III/sem_II/PS/proiect/gradina/src/view/UserPage.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport '../style/UserPage.css'; // Import CSS file\r\nimport UserPresenter from \"../presenter/UserPresenter\";\r\n\r\nclass UserPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            employees: [],\r\n            selectedRow: null,\r\n            lastLang: null,\r\n            dict: []\r\n        };\r\n\r\n        this.presenter = new UserPresenter(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.presenter.fetchData();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Cancel any pending axios requests when the component unmounts\r\n        this.cancelRequests();\r\n    }\r\n\r\n    cancelRequests() {\r\n        // Implement cancellation logic for axios requests if needed\r\n    }\r\n\r\n\r\n\r\n    handleRowClick = (userId) => {\r\n        this.setState({ selectedRow: userId });\r\n    };\r\n\r\n    handleDelete = (id) => {\r\n        axios.delete(`http://localhost:8080/users/deleteById?id=${id}`)\r\n            .then(response => {\r\n                console.log(response.data);\r\n                this.setState(prevState => ({\r\n                    users: prevState.users.filter(user => user.userID !== id)\r\n                }));\r\n            })\r\n            .catch(error => {\r\n                console.error('Error deleting data:', error);\r\n            });\r\n\r\n        axios.delete(`http://localhost:8080/employee/deleteByUser?id=${id}`)\r\n            .then(response => {\r\n                console.log(response.data);\r\n                this.setState(prevState => ({\r\n                    employees: prevState.employees.filter(emp => emp.id !== id)\r\n                }));\r\n            })\r\n            .catch(error => {\r\n                console.error('Error deleting data:', error);\r\n            });\r\n    };\r\n\r\n    handleEdit = (userId) => {\r\n        const { role, onChangePage, lang } = this.props;\r\n        onChangePage(role, 5, 0, userId, lang);\r\n    };\r\n\r\n    showAll = () => {\r\n        this.presenter.fetchData();\r\n    };\r\n\r\n    showAdmins = () => {\r\n        axios.get('http://localhost:8080/users/filter?status=yes')\r\n            .then(response => {\r\n                this.setState({\r\n                    users: response.data\r\n                });\r\n                axios.get('http://localhost:8080/employee/filter?status=yes')\r\n                    .then(resp => {\r\n                        this.setState( {\r\n                            employees :resp.data\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        console.error('Error fetching employee data:', error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching user data:', error);\r\n            });\r\n    };\r\n\r\n    showEmp = () => {\r\n        axios.get('http://localhost:8080/users/filter?status=no')\r\n            .then(response => {\r\n                this.setState({\r\n                    users: response.data\r\n                });\r\n                axios.get('http://localhost:8080/employee/filter?status=no')\r\n                    .then(resp => {\r\n                        this.setState( {\r\n                            employees :resp.data\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        console.error('Error fetching employee data:', error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching user data:', error);\r\n            });\r\n    };\r\n\r\n    render() {\r\n        this.presenter.render();\r\n    }\r\n}\r\n\r\nexport default UserPage;\r\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,uBAAuB,CAAC,CAAC;AAChC,OAAOC,aAAa,MAAM,4BAA4B;AAEtD,MAAMC,QAAQ,SAASH,SAAS,CAAC;EAC7BI,WAAWA,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IAAC,KA2BjBC,cAAc,GAAIC,MAAM,IAAK;MACzB,IAAI,CAACC,QAAQ,CAAC;QAAEC,WAAW,EAAEF;MAAO,CAAC,CAAC;IAC1C,CAAC;IAAA,KAEDG,YAAY,GAAIC,EAAE,IAAK;MACnBV,KAAK,CAACW,MAAM,CAAE,6CAA4CD,EAAG,EAAC,CAAC,CAC1DE,IAAI,CAACC,QAAQ,IAAI;QACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAAC;QAC1B,IAAI,CAACT,QAAQ,CAACU,SAAS,KAAK;UACxBC,KAAK,EAAED,SAAS,CAACC,KAAK,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,KAAKX,EAAE;QAC5D,CAAC,CAAC,CAAC;MACP,CAAC,CAAC,CACDY,KAAK,CAACC,KAAK,IAAI;QACZT,OAAO,CAACS,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAChD,CAAC,CAAC;MAENvB,KAAK,CAACW,MAAM,CAAE,kDAAiDD,EAAG,EAAC,CAAC,CAC/DE,IAAI,CAACC,QAAQ,IAAI;QACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAAC;QAC1B,IAAI,CAACT,QAAQ,CAACU,SAAS,KAAK;UACxBO,SAAS,EAAEP,SAAS,CAACO,SAAS,CAACL,MAAM,CAACM,GAAG,IAAIA,GAAG,CAACf,EAAE,KAAKA,EAAE;QAC9D,CAAC,CAAC,CAAC;MACP,CAAC,CAAC,CACDY,KAAK,CAACC,KAAK,IAAI;QACZT,OAAO,CAACS,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAChD,CAAC,CAAC;IACV,CAAC;IAAA,KAEDG,UAAU,GAAIpB,MAAM,IAAK;MACrB,MAAM;QAAEqB,IAAI;QAAEC,YAAY;QAAEC;MAAK,CAAC,GAAG,IAAI,CAACzB,KAAK;MAC/CwB,YAAY,CAACD,IAAI,EAAE,CAAC,EAAE,CAAC,EAAErB,MAAM,EAAEuB,IAAI,CAAC;IAC1C,CAAC;IAAA,KAEDC,OAAO,GAAG,MAAM;MACZ,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,CAAC;IAC9B,CAAC;IAAA,KAEDC,UAAU,GAAG,MAAM;MACfjC,KAAK,CAACkC,GAAG,CAAC,+CAA+C,CAAC,CACrDtB,IAAI,CAACC,QAAQ,IAAI;QACd,IAAI,CAACN,QAAQ,CAAC;UACVW,KAAK,EAAEL,QAAQ,CAACG;QACpB,CAAC,CAAC;QACFhB,KAAK,CAACkC,GAAG,CAAC,kDAAkD,CAAC,CACxDtB,IAAI,CAACuB,IAAI,IAAI;UACV,IAAI,CAAC5B,QAAQ,CAAE;YACXiB,SAAS,EAAEW,IAAI,CAACnB;UACpB,CAAC,CAAC;QACN,CAAC,CAAC,CACDM,KAAK,CAACC,KAAK,IAAI;UACZT,OAAO,CAACS,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;QACzD,CAAC,CAAC;MACV,CAAC,CAAC,CACDD,KAAK,CAACC,KAAK,IAAI;QACZT,OAAO,CAACS,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACrD,CAAC,CAAC;IACV,CAAC;IAAA,KAEDa,OAAO,GAAG,MAAM;MACZpC,KAAK,CAACkC,GAAG,CAAC,8CAA8C,CAAC,CACpDtB,IAAI,CAACC,QAAQ,IAAI;QACd,IAAI,CAACN,QAAQ,CAAC;UACVW,KAAK,EAAEL,QAAQ,CAACG;QACpB,CAAC,CAAC;QACFhB,KAAK,CAACkC,GAAG,CAAC,iDAAiD,CAAC,CACvDtB,IAAI,CAACuB,IAAI,IAAI;UACV,IAAI,CAAC5B,QAAQ,CAAE;YACXiB,SAAS,EAAEW,IAAI,CAACnB;UACpB,CAAC,CAAC;QACN,CAAC,CAAC,CACDM,KAAK,CAACC,KAAK,IAAI;UACZT,OAAO,CAACS,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;QACzD,CAAC,CAAC;MACV,CAAC,CAAC,CACDD,KAAK,CAACC,KAAK,IAAI;QACZT,OAAO,CAACS,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACrD,CAAC,CAAC;IACV,CAAC;IAvGG,IAAI,CAACc,KAAK,GAAG;MACTnB,KAAK,EAAE,EAAE;MACTM,SAAS,EAAE,EAAE;MACbhB,WAAW,EAAE,IAAI;MACjB8B,QAAQ,EAAE,IAAI;MACdC,IAAI,EAAE;IACV,CAAC;IAED,IAAI,CAACR,SAAS,GAAG,IAAI9B,aAAa,CAAC,IAAI,CAAC;EAC5C;EAEAuC,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAACT,SAAS,CAACC,SAAS,CAAC,CAAC;EAC9B;EAEAS,oBAAoBA,CAAA,EAAG;IACnB;IACA,IAAI,CAACC,cAAc,CAAC,CAAC;EACzB;EAEAA,cAAcA,CAAA,EAAG;IACb;EAAA;EAoFJC,MAAMA,CAAA,EAAG;IACL,IAAI,CAACZ,SAAS,CAACY,MAAM,CAAC,CAAC;EAC3B;AACJ;AAEA,eAAezC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}