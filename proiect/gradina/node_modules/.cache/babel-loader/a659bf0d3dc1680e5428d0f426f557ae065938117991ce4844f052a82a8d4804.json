{"ast":null,"code":"import React, { Component } from 'react';\nimport Chart from 'chart.js/auto';\nimport axios from \"axios\";\nimport PlantPresenter from \"../presenter/PlantPresenter\";\nclass StatisticsPage extends Component {\n  constructor(props) {\n    super(props);\n    this.destroyChart = chartRef => {\n      if (chartRef.current && chartRef.current.chart) {\n        chartRef.current.chart.destroy();\n      }\n    };\n    this.renderChart = (chartRef, data, type) => {\n      if (chartRef.current) {\n        chartRef.current.chart = new Chart(chartRef.current, {\n          type: type,\n          data: data,\n          options: {\n            responsive: true,\n            maintainAspectRatio: false\n          }\n        });\n      }\n    };\n    this.state = {\n      chartData: null,\n      lastLang: null,\n      dict: []\n    };\n    this.pieChartRef = /*#__PURE__*/React.createRef();\n    this.barChart1Ref = /*#__PURE__*/React.createRef();\n    this.barChart2Ref = /*#__PURE__*/React.createRef();\n    this.presenter = new PlantPresenter(this);\n  }\n  componentDidMount() {\n    this.presenter.fetchDataStats();\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.chartData !== this.state.chartData && this.state.chartData) {\n      this.destroyChart(this.pieChartRef);\n      this.destroyChart(this.barChart1Ref);\n      this.destroyChart(this.barChart2Ref);\n      this.renderChart(this.pieChartRef, this.state.chartData.pieChartData, 'pie');\n      this.renderChart(this.barChart1Ref, this.state.chartData.barChartData1, 'bar');\n      this.renderChart(this.barChart2Ref, this.state.chartData.barChartData2, 'bar');\n    }\n  }\n  componentWillUnmount() {\n    this.presenter.destroyChart(this.pieChartRef);\n    this.presenter.destroyChart(this.barChart1Ref);\n    this.presenter.destroyChart(this.barChart2Ref);\n  }\n  render() {\n    return this.presenter.renderStats();\n  }\n}\nexport default StatisticsPage;","map":{"version":3,"names":["React","Component","Chart","axios","PlantPresenter","StatisticsPage","constructor","props","destroyChart","chartRef","current","chart","destroy","renderChart","data","type","options","responsive","maintainAspectRatio","state","chartData","lastLang","dict","pieChartRef","createRef","barChart1Ref","barChart2Ref","presenter","componentDidMount","fetchDataStats","componentDidUpdate","prevProps","prevState","pieChartData","barChartData1","barChartData2","componentWillUnmount","render","renderStats"],"sources":["D:/Personal_Data/an III/sem_II/PS/proiect/gradina/src/view/Statistics.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Chart from 'chart.js/auto';\r\nimport axios from \"axios\";\r\nimport PlantPresenter from \"../presenter/PlantPresenter\";\r\n\r\nclass StatisticsPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            chartData: null,\r\n            lastLang: null,\r\n            dict: []\r\n        };\r\n\r\n\r\n        this.pieChartRef = React.createRef();\r\n        this.barChart1Ref = React.createRef();\r\n        this.barChart2Ref = React.createRef();\r\n        this.presenter = new PlantPresenter(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.presenter.fetchDataStats();\r\n    }\r\n\r\n    destroyChart = (chartRef) => {\r\n        if (chartRef.current && chartRef.current.chart) {\r\n            chartRef.current.chart.destroy();\r\n        }\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.chartData !== this.state.chartData && this.state.chartData) {\r\n            this.destroyChart(this.pieChartRef);\r\n            this.destroyChart(this.barChart1Ref);\r\n            this.destroyChart(this.barChart2Ref);\r\n\r\n            this.renderChart(this.pieChartRef, this.state.chartData.pieChartData, 'pie');\r\n            this.renderChart(this.barChart1Ref, this.state.chartData.barChartData1, 'bar');\r\n            this.renderChart(this.barChart2Ref, this.state.chartData.barChartData2, 'bar');\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.presenter.destroyChart(this.pieChartRef);\r\n        this.presenter.destroyChart(this.barChart1Ref);\r\n        this.presenter.destroyChart(this.barChart2Ref);\r\n    }\r\n\r\n    renderChart = (chartRef, data, type) => {\r\n        if (chartRef.current) {\r\n            chartRef.current.chart = new Chart(chartRef.current, {\r\n                type: type,\r\n                data: data,\r\n                options: {\r\n                    responsive: true,\r\n                    maintainAspectRatio: false\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n   render() {\r\n       return this.presenter.renderStats();\r\n   }\r\n}\r\n\r\nexport default StatisticsPage;\r\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,KAAK,MAAM,eAAe;AACjC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,cAAc,MAAM,6BAA6B;AAExD,MAAMC,cAAc,SAASJ,SAAS,CAAC;EACnCK,WAAWA,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IAAC,KAkBjBC,YAAY,GAAIC,QAAQ,IAAK;MACzB,IAAIA,QAAQ,CAACC,OAAO,IAAID,QAAQ,CAACC,OAAO,CAACC,KAAK,EAAE;QAC5CF,QAAQ,CAACC,OAAO,CAACC,KAAK,CAACC,OAAO,CAAC,CAAC;MACpC;IACJ,CAAC;IAAA,KAoBDC,WAAW,GAAG,CAACJ,QAAQ,EAAEK,IAAI,EAAEC,IAAI,KAAK;MACpC,IAAIN,QAAQ,CAACC,OAAO,EAAE;QAClBD,QAAQ,CAACC,OAAO,CAACC,KAAK,GAAG,IAAIT,KAAK,CAACO,QAAQ,CAACC,OAAO,EAAE;UACjDK,IAAI,EAAEA,IAAI;UACVD,IAAI,EAAEA,IAAI;UACVE,OAAO,EAAE;YACLC,UAAU,EAAE,IAAI;YAChBC,mBAAmB,EAAE;UACzB;QACJ,CAAC,CAAC;MACN;IACJ,CAAC;IApDG,IAAI,CAACC,KAAK,GAAG;MACTC,SAAS,EAAE,IAAI;MACfC,QAAQ,EAAE,IAAI;MACdC,IAAI,EAAE;IACV,CAAC;IAGD,IAAI,CAACC,WAAW,gBAAGvB,KAAK,CAACwB,SAAS,CAAC,CAAC;IACpC,IAAI,CAACC,YAAY,gBAAGzB,KAAK,CAACwB,SAAS,CAAC,CAAC;IACrC,IAAI,CAACE,YAAY,gBAAG1B,KAAK,CAACwB,SAAS,CAAC,CAAC;IACrC,IAAI,CAACG,SAAS,GAAG,IAAIvB,cAAc,CAAC,IAAI,CAAC;EAC7C;EAEAwB,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAACD,SAAS,CAACE,cAAc,CAAC,CAAC;EACnC;EAQAC,kBAAkBA,CAACC,SAAS,EAAEC,SAAS,EAAE;IACrC,IAAIA,SAAS,CAACZ,SAAS,KAAK,IAAI,CAACD,KAAK,CAACC,SAAS,IAAI,IAAI,CAACD,KAAK,CAACC,SAAS,EAAE;MACtE,IAAI,CAACZ,YAAY,CAAC,IAAI,CAACe,WAAW,CAAC;MACnC,IAAI,CAACf,YAAY,CAAC,IAAI,CAACiB,YAAY,CAAC;MACpC,IAAI,CAACjB,YAAY,CAAC,IAAI,CAACkB,YAAY,CAAC;MAEpC,IAAI,CAACb,WAAW,CAAC,IAAI,CAACU,WAAW,EAAE,IAAI,CAACJ,KAAK,CAACC,SAAS,CAACa,YAAY,EAAE,KAAK,CAAC;MAC5E,IAAI,CAACpB,WAAW,CAAC,IAAI,CAACY,YAAY,EAAE,IAAI,CAACN,KAAK,CAACC,SAAS,CAACc,aAAa,EAAE,KAAK,CAAC;MAC9E,IAAI,CAACrB,WAAW,CAAC,IAAI,CAACa,YAAY,EAAE,IAAI,CAACP,KAAK,CAACC,SAAS,CAACe,aAAa,EAAE,KAAK,CAAC;IAClF;EACJ;EAEAC,oBAAoBA,CAAA,EAAG;IACnB,IAAI,CAACT,SAAS,CAACnB,YAAY,CAAC,IAAI,CAACe,WAAW,CAAC;IAC7C,IAAI,CAACI,SAAS,CAACnB,YAAY,CAAC,IAAI,CAACiB,YAAY,CAAC;IAC9C,IAAI,CAACE,SAAS,CAACnB,YAAY,CAAC,IAAI,CAACkB,YAAY,CAAC;EAClD;EAeDW,MAAMA,CAAA,EAAG;IACL,OAAO,IAAI,CAACV,SAAS,CAACW,WAAW,CAAC,CAAC;EACvC;AACH;AAEA,eAAejC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}