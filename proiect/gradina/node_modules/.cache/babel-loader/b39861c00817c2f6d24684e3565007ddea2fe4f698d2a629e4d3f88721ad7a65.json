{"ast":null,"code":"var _jsxFileName = \"D:\\\\Personal_Data\\\\an III\\\\sem_II\\\\PS\\\\proiect\\\\gradina\\\\src\\\\view\\\\Statistics.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport Chart from 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StatisticsPage = () => {\n  _s();\n  const [chartData, setChartData] = useState(null);\n  const pieChartRef = useRef(null);\n  const barChart1Ref = useRef(null);\n  const barChart2Ref = useRef(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const pieResponse = await fetch('http://localhost:8080/plant/pie');\n        const bar1Response = await fetch('http://localhost:8080/plant/bar1');\n        const bar2Response = await fetch('http://localhost:8080/plant/bar2');\n        if (!pieResponse.ok || !bar1Response.ok || !bar2Response.ok) {\n          throw new Error('Failed to fetch data');\n        }\n        const pieData = await pieResponse.json();\n        const bar1Data = await bar1Response.json();\n        const bar2Data = await bar2Response.json();\n        const pieChartData = {\n          labels: pieData.filter((_, index) => index % 2 !== 0),\n          datasets: [{\n            data: pieData.filter((_, index) => index % 2 === 0),\n            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],\n            hoverBackgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']\n          }]\n        };\n        const barChartData1 = {\n          labels: ['No', 'Yes'],\n          datasets: [{\n            label: 'Plants by alimentation:',\n            data: bar1Data,\n            backgroundColor: 'rgba(255, 99, 132, 0.2)',\n            borderColor: 'rgba(255, 99, 132, 1)',\n            borderWidth: 1\n          }]\n        };\n        const barChartData2 = {\n          labels: bar2Data.filter((_, index) => index % 2 !== 0),\n          datasets: [{\n            label: 'Plants by location:',\n            data: bar2Data.filter((_, index) => index % 2 === 0),\n            backgroundColor: 'rgba(54, 162, 235, 0.2)',\n            borderColor: 'rgba(54, 162, 235, 1)',\n            borderWidth: 1\n          }]\n        };\n        setChartData({\n          pieChartData,\n          barChartData1,\n          barChartData2\n        });\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (chartData) {\n      destroyChart(pieChartRef);\n      destroyChart(barChart1Ref);\n      destroyChart(barChart2Ref);\n      renderChart(pieChartRef, chartData.pieChartData, 'pie');\n      renderChart(barChart1Ref, chartData.barChartData1, 'bar');\n      renderChart(barChart2Ref, chartData.barChartData2, 'bar');\n    }\n  }, [chartData]);\n  const destroyChart = chartRef => {\n    if (chartRef.current) {\n      // Destroy existing chart instance if exists\n      if (chartRef.current.chart) {\n        chartRef.current.chart.destroy();\n      }\n    }\n  };\n  const renderChart = (chartRef, data, type) => {\n    if (chartRef.current) {\n      // Render new chart instance\n      chartRef.current.chart = new Chart(chartRef.current, {\n        type: type,\n        data: data,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Statistics Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Plants by type:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '50%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"pieChart\",\n          ref: pieChartRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Plants by alimentation:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '50%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"barChart1\",\n          ref: barChart1Ref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Plants by location:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '50%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"barChart2\",\n          ref: barChart2Ref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 9\n  }, this);\n};\n_s(StatisticsPage, \"5S/EKHihYB6hmOxont21AeEUb5Q=\");\n_c = StatisticsPage;\nexport default StatisticsPage;\nvar _c;\n$RefreshReg$(_c, \"StatisticsPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Chart","jsxDEV","_jsxDEV","StatisticsPage","_s","chartData","setChartData","pieChartRef","barChart1Ref","barChart2Ref","fetchData","pieResponse","fetch","bar1Response","bar2Response","ok","Error","pieData","json","bar1Data","bar2Data","pieChartData","labels","filter","_","index","datasets","data","backgroundColor","hoverBackgroundColor","barChartData1","label","borderColor","borderWidth","barChartData2","error","console","destroyChart","renderChart","chartRef","current","chart","destroy","type","options","responsive","maintainAspectRatio","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","flexDirection","alignItems","width","id","ref","_c","$RefreshReg$"],"sources":["D:/Personal_Data/an III/sem_II/PS/proiect/gradina/src/view/Statistics.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport Chart from 'chart.js/auto';\r\n\r\nconst StatisticsPage = () => {\r\n    const [chartData, setChartData] = useState(null);\r\n    const pieChartRef = useRef(null);\r\n    const barChart1Ref = useRef(null);\r\n    const barChart2Ref = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const pieResponse = await fetch('http://localhost:8080/plant/pie');\r\n                const bar1Response = await fetch('http://localhost:8080/plant/bar1');\r\n                const bar2Response = await fetch('http://localhost:8080/plant/bar2');\r\n\r\n                if (!pieResponse.ok || !bar1Response.ok || !bar2Response.ok) {\r\n                    throw new Error('Failed to fetch data');\r\n                }\r\n\r\n                const pieData = await pieResponse.json();\r\n                const bar1Data = await bar1Response.json();\r\n                const bar2Data = await bar2Response.json();\r\n\r\n                const pieChartData = {\r\n                    labels: pieData.filter((_, index) => index % 2 !== 0),\r\n                    datasets: [{\r\n                        data: pieData.filter((_, index) => index % 2 === 0),\r\n                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],\r\n                        hoverBackgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']\r\n                    }]\r\n                };\r\n\r\n                const barChartData1 = {\r\n                    labels: ['No', 'Yes'],\r\n                    datasets: [{\r\n                        label: 'Plants by alimentation:',\r\n                        data: bar1Data,\r\n                        backgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n                        borderColor: 'rgba(255, 99, 132, 1)',\r\n                        borderWidth: 1\r\n                    }]\r\n                };\r\n\r\n                const barChartData2 = {\r\n                    labels: bar2Data.filter((_, index) => index % 2 !== 0),\r\n                    datasets: [{\r\n                        label: 'Plants by location:',\r\n                        data: bar2Data.filter((_, index) => index % 2 === 0),\r\n                        backgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n                        borderColor: 'rgba(54, 162, 235, 1)',\r\n                        borderWidth: 1\r\n                    }]\r\n                };\r\n\r\n                setChartData({ pieChartData, barChartData1, barChartData2 });\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (chartData) {\r\n            destroyChart(pieChartRef);\r\n            destroyChart(barChart1Ref);\r\n            destroyChart(barChart2Ref);\r\n\r\n            renderChart(pieChartRef, chartData.pieChartData, 'pie');\r\n            renderChart(barChart1Ref, chartData.barChartData1, 'bar');\r\n            renderChart(barChart2Ref, chartData.barChartData2, 'bar');\r\n        }\r\n    }, [chartData]);\r\n\r\n    const destroyChart = (chartRef) => {\r\n        if (chartRef.current) {\r\n            // Destroy existing chart instance if exists\r\n            if (chartRef.current.chart) {\r\n                chartRef.current.chart.destroy();\r\n            }\r\n        }\r\n    };\r\n\r\n    const renderChart = (chartRef, data, type) => {\r\n        if (chartRef.current) {\r\n            // Render new chart instance\r\n            chartRef.current.chart = new Chart(chartRef.current, {\r\n                type: type,\r\n                data: data,\r\n                options: {\r\n                    responsive: true,\r\n                    maintainAspectRatio: false\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Statistics Page</h1>\r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <h2>Plants by type:</h2>\r\n                <div style={{ width: '50%' }}>\r\n                    <canvas id=\"pieChart\" ref={pieChartRef}></canvas>\r\n                </div>\r\n                <div>\r\n                    <h1></h1>\r\n                </div>\r\n                <h2>Plants by alimentation:</h2>\r\n                <div style={{ width: '50%' }}>\r\n                    <canvas id=\"barChart1\" ref={barChart1Ref}></canvas>\r\n                </div>\r\n                <div>\r\n                    <h1></h1>\r\n                </div>\r\n                <h2>Plants by location:</h2>\r\n                <div style={{ width: '50%' }}>\r\n                    <canvas id=\"barChart2\" ref={barChart2Ref}></canvas>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatisticsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}