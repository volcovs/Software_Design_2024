{"ast":null,"code":"import { useRef } from 'react';\nimport useStableMemo from './useStableMemo';\nimport useWillUnmount from './useWillUnmount';\n\n/**\n * An _immediate_ effect that runs an effect callback when its dependency array\n * changes. This is helpful for updates should must run during render, most\n * commonly state derived from props; a more ergonomic version of https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops\n *\n * ```ts\n * function Example({ value }) {\n *   const [intermediaryValue, setValue] = useState(value);\n *\n *   useUpdateImmediateEffect(() => {\n *     setValue(value)\n *   }, [value])\n * ```\n *\n * @category effects\n */\nfunction useUpdateImmediateEffect(effect, deps) {\n  const firstRef = useRef(true);\n  const tearDown = useRef();\n  useWillUnmount(() => {\n    if (tearDown.current) tearDown.current();\n  });\n  useStableMemo(() => {\n    if (firstRef.current) {\n      firstRef.current = false;\n      return;\n    }\n    if (tearDown.current) tearDown.current();\n    tearDown.current = effect();\n  }, deps);\n}\nexport default useUpdateImmediateEffect;","map":{"version":3,"names":["useRef","useStableMemo","useWillUnmount","useUpdateImmediateEffect","effect","deps","firstRef","tearDown","current"],"sources":["D:/Personal_Data/an III/sem_II/PS/proiect/gradina/node_modules/@restart/hooks/esm/useUpdateImmediateEffect.js"],"sourcesContent":["import { useRef } from 'react';\nimport useStableMemo from './useStableMemo';\nimport useWillUnmount from './useWillUnmount';\n\n/**\n * An _immediate_ effect that runs an effect callback when its dependency array\n * changes. This is helpful for updates should must run during render, most\n * commonly state derived from props; a more ergonomic version of https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops\n *\n * ```ts\n * function Example({ value }) {\n *   const [intermediaryValue, setValue] = useState(value);\n *\n *   useUpdateImmediateEffect(() => {\n *     setValue(value)\n *   }, [value])\n * ```\n *\n * @category effects\n */\nfunction useUpdateImmediateEffect(effect, deps) {\n  const firstRef = useRef(true);\n  const tearDown = useRef();\n  useWillUnmount(() => {\n    if (tearDown.current) tearDown.current();\n  });\n  useStableMemo(() => {\n    if (firstRef.current) {\n      firstRef.current = false;\n      return;\n    }\n    if (tearDown.current) tearDown.current();\n    tearDown.current = effect();\n  }, deps);\n}\nexport default useUpdateImmediateEffect;"],"mappings":"AAAA,SAASA,MAAM,QAAQ,OAAO;AAC9B,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,cAAc,MAAM,kBAAkB;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,wBAAwBA,CAACC,MAAM,EAAEC,IAAI,EAAE;EAC9C,MAAMC,QAAQ,GAAGN,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMO,QAAQ,GAAGP,MAAM,CAAC,CAAC;EACzBE,cAAc,CAAC,MAAM;IACnB,IAAIK,QAAQ,CAACC,OAAO,EAAED,QAAQ,CAACC,OAAO,CAAC,CAAC;EAC1C,CAAC,CAAC;EACFP,aAAa,CAAC,MAAM;IAClB,IAAIK,QAAQ,CAACE,OAAO,EAAE;MACpBF,QAAQ,CAACE,OAAO,GAAG,KAAK;MACxB;IACF;IACA,IAAID,QAAQ,CAACC,OAAO,EAAED,QAAQ,CAACC,OAAO,CAAC,CAAC;IACxCD,QAAQ,CAACC,OAAO,GAAGJ,MAAM,CAAC,CAAC;EAC7B,CAAC,EAAEC,IAAI,CAAC;AACV;AACA,eAAeF,wBAAwB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}