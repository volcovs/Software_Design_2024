{"ast":null,"code":"/* eslint-disable react-hooks/exhaustive-deps */\nimport querySelectorAll from 'dom-helpers/querySelectorAll';\nimport React, { useCallback, useContext, useLayoutEffect, useMemo, useState, useRef } from 'react';\nexport const FocusListContext = /*#__PURE__*/React.createContext(null);\nconst defaultOpts = {\n  behavior: 'stop'\n};\nexport function useListOption(dataItem) {\n  const ctx = useContext(FocusListContext);\n  const prevElement = useRef(null); // this is a bit convoluted because we want to use a ref object, a callback ref\n  // causes an extra render which is fine except that it means the list hook for\n  // anchor items fires before elements are processed\n\n  const ref = useRef(null);\n  useLayoutEffect(() => () => {\n    ctx == null ? void 0 : ctx.map.delete(ref.current);\n  }, []);\n  useLayoutEffect(() => {\n    if (prevElement.current !== ref.current) {\n      ctx == null ? void 0 : ctx.map.delete(prevElement.current);\n    }\n    prevElement.current = ref.current;\n    if (ref.current && (ctx == null ? void 0 : ctx.map.get(ref.current)) !== dataItem) {\n      ctx == null ? void 0 : ctx.map.set(ref.current, dataItem);\n    }\n  });\n  const focused = dataItem === (ctx == null ? void 0 : ctx.focusedItem);\n  return [ref, focused, focused ? ctx == null ? void 0 : ctx.activeId : undefined];\n}\nexport const useFocusList = ({\n  scope: listRef,\n  anchorItem,\n  focusFirstItem: _focusFirstItem = false,\n  scopeSelector: _scopeSelector = '',\n  activeId\n}) => {\n  const map = useMemo(() => new WeakMap(), []);\n  const [focusedItem, setFocusedItem] = useState();\n  const itemSelector = `${_scopeSelector} [data-rw-focusable]`.trim();\n  const get = () => {\n    const items = querySelectorAll(listRef.current, itemSelector);\n    return [items, items.find(e => e.dataset.rwFocused === '')];\n  };\n  const list = useMemo(() => {\n    return {\n      size() {\n        const [items] = get();\n        return items.length;\n      },\n      get,\n      toDataItem: el => map.get(el),\n      first() {\n        const [[first]] = get();\n        return first;\n      },\n      focus(el) {\n        if (!el || map.has(el)) setFocusedItem(el ? map.get(el) : undefined);\n      },\n      last() {\n        const [items] = get();\n        return items[items.length - 1];\n      },\n      next({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = items.indexOf(focusedItem) + 1;\n        if (nextIdx >= items.length) {\n          if (behavior === 'loop') return items[0];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n        return items[nextIdx];\n      },\n      prev({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = Math.max(0, items.indexOf(focusedItem)) - 1;\n        if (nextIdx < 0) {\n          if (behavior === 'loop') return items[items.length - 1];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n        return items[nextIdx];\n      }\n    };\n  }, []);\n  useLayoutEffect(() => {\n    if (!anchorItem) {\n      list.focus(null);\n      return;\n    }\n    const element = get()[0].find(el => list.toDataItem(el) === anchorItem);\n    list.focus(element);\n  }, [anchorItem]);\n  useLayoutEffect(() => {\n    if (!listRef.current) return;\n    const [, focusedElement] = get();\n    const hasItem = focusedElement != null;\n    if (!hasItem && _focusFirstItem || hasItem && !listRef.current.contains(focusedElement)) {\n      if (_focusFirstItem) list.focus(list.first());else list.focus(null);\n    }\n  });\n  const context = useMemo(() => ({\n    map,\n    focusedItem,\n    activeId\n  }), [focusedItem, activeId]);\n  list.context = context;\n  list.getFocused = useCallback(() => focusedItem, [focusedItem]);\n  list.hasFocused = () => focusedItem !== undefined;\n  return list;\n};","map":{"version":3,"names":["querySelectorAll","React","useCallback","useContext","useLayoutEffect","useMemo","useState","useRef","FocusListContext","createContext","defaultOpts","behavior","useListOption","dataItem","ctx","prevElement","ref","map","delete","current","get","set","focused","focusedItem","activeId","undefined","useFocusList","scope","listRef","anchorItem","focusFirstItem","_focusFirstItem","scopeSelector","_scopeSelector","WeakMap","setFocusedItem","itemSelector","trim","items","find","e","dataset","rwFocused","list","size","length","toDataItem","el","first","focus","has","last","next","nextIdx","indexOf","prev","Math","max","element","focusedElement","hasItem","contains","context","getFocused","hasFocused"],"sources":["D:/Personal_Data/an III/sem_II/PS/proiect/gradina/node_modules/react-widgets/esm/FocusListContext.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport querySelectorAll from 'dom-helpers/querySelectorAll';\nimport React, { useCallback, useContext, useLayoutEffect, useMemo, useState, useRef } from 'react';\nexport const FocusListContext = /*#__PURE__*/React.createContext(null);\nconst defaultOpts = {\n  behavior: 'stop'\n};\nexport function useListOption(dataItem) {\n  const ctx = useContext(FocusListContext);\n  const prevElement = useRef(null); // this is a bit convoluted because we want to use a ref object, a callback ref\n  // causes an extra render which is fine except that it means the list hook for\n  // anchor items fires before elements are processed\n\n  const ref = useRef(null);\n  useLayoutEffect(() => () => {\n    ctx == null ? void 0 : ctx.map.delete(ref.current);\n  }, []);\n  useLayoutEffect(() => {\n    if (prevElement.current !== ref.current) {\n      ctx == null ? void 0 : ctx.map.delete(prevElement.current);\n    }\n\n    prevElement.current = ref.current;\n\n    if (ref.current && (ctx == null ? void 0 : ctx.map.get(ref.current)) !== dataItem) {\n      ctx == null ? void 0 : ctx.map.set(ref.current, dataItem);\n    }\n  });\n  const focused = dataItem === (ctx == null ? void 0 : ctx.focusedItem);\n  return [ref, focused, focused ? ctx == null ? void 0 : ctx.activeId : undefined];\n}\nexport const useFocusList = ({\n  scope: listRef,\n  anchorItem,\n  focusFirstItem: _focusFirstItem = false,\n  scopeSelector: _scopeSelector = '',\n  activeId\n}) => {\n  const map = useMemo(() => new WeakMap(), []);\n  const [focusedItem, setFocusedItem] = useState();\n  const itemSelector = `${_scopeSelector} [data-rw-focusable]`.trim();\n\n  const get = () => {\n    const items = querySelectorAll(listRef.current, itemSelector);\n    return [items, items.find(e => e.dataset.rwFocused === '')];\n  };\n\n  const list = useMemo(() => {\n    return {\n      size() {\n        const [items] = get();\n        return items.length;\n      },\n\n      get,\n      toDataItem: el => map.get(el),\n\n      first() {\n        const [[first]] = get();\n        return first;\n      },\n\n      focus(el) {\n        if (!el || map.has(el)) setFocusedItem(el ? map.get(el) : undefined);\n      },\n\n      last() {\n        const [items] = get();\n        return items[items.length - 1];\n      },\n\n      next({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = items.indexOf(focusedItem) + 1;\n\n        if (nextIdx >= items.length) {\n          if (behavior === 'loop') return items[0];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      },\n\n      prev({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = Math.max(0, items.indexOf(focusedItem)) - 1;\n\n        if (nextIdx < 0) {\n          if (behavior === 'loop') return items[items.length - 1];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      }\n\n    };\n  }, []);\n  useLayoutEffect(() => {\n    if (!anchorItem) {\n      list.focus(null);\n      return;\n    }\n\n    const element = get()[0].find(el => list.toDataItem(el) === anchorItem);\n    list.focus(element);\n  }, [anchorItem]);\n  useLayoutEffect(() => {\n    if (!listRef.current) return;\n    const [, focusedElement] = get();\n    const hasItem = focusedElement != null;\n\n    if (!hasItem && _focusFirstItem || hasItem && !listRef.current.contains(focusedElement)) {\n      if (_focusFirstItem) list.focus(list.first());else list.focus(null);\n    }\n  });\n  const context = useMemo(() => ({\n    map,\n    focusedItem,\n    activeId\n  }), [focusedItem, activeId]);\n  list.context = context;\n  list.getFocused = useCallback(() => focusedItem, [focusedItem]);\n\n  list.hasFocused = () => focusedItem !== undefined;\n\n  return list;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}